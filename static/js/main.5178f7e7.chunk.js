(this.webpackJsonpphotoapp=this.webpackJsonpphotoapp||[]).push([[0],{19:function(e,t,a){e.exports={imgg:"ImageBrowser_imgg__2P7E6",results:"ImageBrowser_results__2dVoj",input:"ImageBrowser_input__t11AZ",Applogo:"ImageBrowser_Applogo__3nkTv",buttonBox:"ImageBrowser_buttonBox__OkVme"}},20:function(e,t,a){e.exports={cropContainer:"CropUpload_cropContainer__3KRVk",cropBox:"CropUpload_cropBox__3Yzsj",uploadBox:"CropUpload_uploadBox__16Zx1"}},25:function(e,t,a){e.exports={ResizedPicture:"ResizedPicture_ResizedPicture__whAKW",canvasbox:"ResizedPicture_canvasbox__rZKaU",specs:"ResizedPicture_specs__zP7Hy"}},31:function(e,t,a){e.exports={outputlinks:"OutputLinks_outputlinks__2uFKV",label:"OutputLinks_label__2uu6x"}},42:function(e,t,a){e.exports={button:"Button_button__j0YmJ"}},46:function(e,t,a){e.exports=a(76)},51:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),i=a.n(o),c=(a(51),a(11)),s=a(12),l=a(15),u=a(14),p=a(19),m=a.n(p),d=a(42),h=a.n(d),g=function(e){return r.a.createElement("button",{onClick:e.onClick,className:h.a.button},e.name)},f=a(25),v=a.n(f),_=r.a.memo((function(e){var t=Object(n.useRef)(),a=e.src,o=e.height,i=e.width,c=e.savesrc;return Object(n.useEffect)((function(){var e=t.current.getContext("2d");e.clearRect(0,0,i,o);var n=new Image;n.src=a,n.onload=function(a){e.drawImage(n,Math.max(0,(1024-+i)/2),Math.max(0,(1024-+o)/2),+i,+o,0,0,+i,+o);var r=t.current.toDataURL();c.call(void 0,r)}}),[a,o,i,c]),r.a.createElement("div",{className:v.a.ResizedPicture},r.a.createElement("div",{className:v.a.canvasbox},r.a.createElement("canvas",{ref:t,width:e.width,height:e.height}," ")),r.a.createElement("div",{className:v.a.specs},r.a.createElement("h3",null,e.name),r.a.createElement("div",null,r.a.createElement("strong",null,e.width," X ",e.height))))})),b=a(2),w=a(13),E=a(9),x=a.n(E),C=function(e){var t="";return e.active&&(t=x.a.active),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:x.a.backdrop+" "+t}),r.a.createElement("div",{className:x.a.modal+" "+t},r.a.createElement("div",{className:x.a.modalHeader},r.a.createElement("div",null,e.heading?e.heading:"Info")),r.a.createElement("div",{className:x.a.modalBody},e.children),r.a.createElement("div",{className:x.a.modalFooter},r.a.createElement(g,{name:"Cancel",onClick:e.onCancel}))))},O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={error:!1,errorMsg:""},e.inputRef=r.a.createRef(),e.onFileChangeHandler=function(t){var a=t.target.files[0].type;if("image/png"!==a&&"image/jpeg"!==a&&"image/JPG"!==a)e.inputRef.current.value=e.inputRef.current.defaultValue,e.setState({error:!0,errorMsg:"Please upload the image file with png or jpeg format"});else{var n=new FileReader;n.onload=function(t){if(t.target.result){var a=new Image;a.src=t.target.result,a.onload=function(t){1024!==a.height&&1024!==a.width?(e.inputRef.current.value=e.inputRef.current.defaultValue,e.setState({error:!0,errorMsg:"Please upload the image with resolution 1024 X 1024"})):e.props.store.src!==a.src&&e.props.setSrc(a.src)}}},t.target.files[0]&&n.readAsDataURL(t.target.files[0])}},e.outputImageHandler=function(t,a){var n=e.props.store.outputimages.findIndex((function(e){return e.name===t}));e.props.store.outputimages[n].src!==a&&e.props.setOutputSrc(t,a)},e.cropAndUploadHandler=function(){e.props.history.push("/crop_and_upload")},e.onCancelHandler=function(){e.setState({error:!1})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=null,a=null;return this.props.store.src&&(t=r.a.createElement("div",{className:m.a.buttonBox},r.a.createElement(g,{name:"Set Crop and Upload",onClick:this.cropAndUploadHandler}))),this.state.error&&(a=r.a.createElement(C,{active:this.state.error,onCancel:this.onCancelHandler,heading:"oops...error occurred"},this.state.errorMsg)),r.a.createElement("div",null,a,r.a.createElement("h2",{className:m.a.Applogo},"IMAGE SIZE CONVERTER"),r.a.createElement("input",{type:"file",ref:this.inputRef,onChange:this.onFileChangeHandler,accept:"image/png,image/jpeg",className:m.a.input}),r.a.createElement("div",{className:m.a.results},this.props.store.src?this.props.store.outputimages.map((function(t){return r.a.createElement(_,{key:t.name,name:t.name,src:e.props.store.src,width:t.width,height:t.height,savesrc:function(a){return e.outputImageHandler(t.name,a)}})})):null),t)}}]),a}(r.a.Component),y=Object(w.b)((function(e){return{store:e}}),(function(e){return{setSrc:function(t){return e({type:"set_source",src:t})},setOutputSrc:function(t,a){return e({type:"set_output",name:t,src:a})}}}))(Object(b.f)(O)),k=a(16),j=a.n(k),M=a(24),I=a(44),R=a.n(I),H=(a(58),a(20)),N=a.n(H),B=function(){var e=Object(M.a)(j.a.mark((function e(t,a){var n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.createElement("canvas"),r=n.getContext("2d"),(o=new Image).src=t,e.abrupt("return",new Promise((function(e){o.onload=function(){r.drawImage(o,10,10,200,180);var t=o.naturalWidth/o.width,i=o.naturalHeight/o.height;n.width=a.width,n.height=a.height,r.drawImage(o,a.x*t,a.y*i,a.width*t,a.height*i,0,0,a.width,a.height),e(n.toDataURL())}})));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=a(45),P=a.n(S),U={headers:{"Content-Type":"multipart/form-data","X-Requested-With":"XMLHttpRequest"}},A=function(e){var t=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Blob([n],{type:a})}(e.src),a=new FormData(document.forms[0]);return a.append("image",t),P.a.post("https://cors-anywhere.herokuapp.com/https://api.imgbb.com/1/upload?key=".concat("43722a73c015bc4b8ce7731bf136bdb6"),a,U)},L=a(31),F=a.n(L),z=function(e){return r.a.createElement("div",{className:F.a.outputlinks},r.a.createElement("h2",{className:F.a.label},e.label,": ",e.width,"X",e.height),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("strong",null,"Link : ")),r.a.createElement("a",{href:e.link,rel:"noreferrer",target:"_blank"},e.link)))},V=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={modal:!1,errorMsg:"",outputLinks:[]},e.onCropComplete=function(){var t=Object(M.a)(j.a.mark((function t(a,n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e.props.store.src,n);case 2:r=t.sent,e.props.setOutputSrc(a,r);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.setCropHandler=function(t,a){var n=e.props.store.outputimages.findIndex((function(e){return e.name===t})),r=e.props.store.outputimages[n].crop;a.x===r.x&&a.y===r.y&&e.props.store.outputimages[n].initial||(e.props.setInitial(t,!0),e.props.setCrop(t,a),e.onCropComplete(t,a))},e.uploadHandler=function(){e.setState({modal:!0}),Promise.all(e.props.store.outputimages.map((function(e){return A(e)}))).then((function(t){e.setState({outputLinks:t})})).catch((function(t){e.setState({modal:!0,errorMsg:"there is some network error. Please try again"})}))},e.onCancelHandler=function(){e.setState({modal:!1,errorMsg:""})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=null;return this.state.modal&&(t=r.a.createElement(C,{active:this.state.modal,onCancel:this.onCancelHandler},r.a.createElement("p",null,"Please wait your request has been processing....."))),this.state.modal&&this.state.errorMsg&&(t=r.a.createElement(C,{active:this.state.modal,onCancel:this.onCancelHandler},this.state.errorMsg)),this.state.outputLinks.length&&(t=r.a.createElement(C,{active:this.state.modal,onCancel:this.onCancelHandler},this.state.outputLinks.map((function(t,a){return r.a.createElement(z,{link:t.data.data.url,label:e.props.store.outputimages[a].name,height:e.props.store.outputimages[a].height,width:e.props.store.outputimages[a].width})})))),r.a.createElement(r.a.Fragment,null,t,r.a.createElement("div",{className:N.a.cropContainer},this.props.store.outputimages.map((function(t){return r.a.createElement("div",{className:N.a.cropBox,key:t.name},r.a.createElement("h3",null,t.name),r.a.createElement(R.a,{src:e.props.store.src,crop:t.crop,className:N.a.reactcrop,onChange:function(a){return e.setCropHandler(t.name,a)},locked:!0}))})),r.a.createElement("div",{className:N.a.uploadBox},r.a.createElement(g,{name:"Upload",onClick:this.uploadHandler}))))}}]),a}(r.a.Component),X=Object(w.b)((function(e){return{store:e}}),(function(e){return{setSrc:function(t){return e({type:"set_source",src:t})},setOutputSrc:function(t,a){return e({type:"set_output",name:t,src:a})},setCrop:function(t,a){return e({type:"set_crop",name:t,crop:a})},setInitial:function(t,a){return e({type:"set_initial",name:t,initial:a})}}}))(V),D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{to:"/app"}),r.a.createElement(b.b,{path:"/app",component:y}),r.a.createElement(b.b,{path:"/crop_and_upload",component:X}))}}]),a}(r.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=a(23),W=a(18),T=a(8),Z=a(26),K={src:null,outputimages:[{name:"horizontal",height:"450",width:"755",src:null,initial:!1,crop:{unit:"px",x:Math.max(0,134.5),y:Math.max(0,287),width:755,height:450}},{name:"vertical",height:"450",width:"365",src:null,initial:!1,crop:{unit:"px",width:"365",height:"365",x:Math.max(0,329.5),y:Math.max(0,287)}},{name:"horizontal small",height:"212",width:"365",src:null,initial:!1,crop:{unit:"px",width:"365",height:"212",x:Math.max(0,329.5),y:Math.max(0,406)}},{name:"gallery",height:"380",width:"380",src:null,initial:!1,crop:{unit:"px",width:"380",height:"380",x:Math.max(0,322),y:Math.max(0,322)}}]},q=function(e,t,a){var n=Object(Z.a)(e),r=n.findIndex((function(e){return e.name===t}));return n[r].src=a,n},Y=function(e,t,a){var n=Object(Z.a)(e),r=n.findIndex((function(e){return e.name===t}));return n[r].crop=a,n},G=function(e,t,a){var n=Object(Z.a)(e),r=n.findIndex((function(e){return e.name===t}));return n[r].initial=a,n},$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.b,Q=Object(W.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_source":return Object(T.a)(Object(T.a)({},e),{},{src:t.src});case"set_output":return Object(T.a)(Object(T.a)({},e),{},{outputimages:q(K.outputimages,t.name,t.src)});case"set_crop":return Object(T.a)(Object(T.a)({},e),{},{outputimages:Y(K.outputimages,t.name,t.crop)});case"set_initial":return Object(T.a)(Object(T.a)({},e),{},{outputimages:G(K.outputimages,t.name,t.initial)});default:return e}}),$());i.a.render(r.a.createElement(w.a,{store:Q},r.a.createElement(J.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports={backdrop:"Modal_backdrop__Yh955",active:"Modal_active__3cW5c",modal:"Modal_modal__3JwwJ",modalHeader:"Modal_modalHeader__2kv2h",modalFooter:"Modal_modalFooter__31ZrL",modalBody:"Modal_modalBody__2wFU4"}}},[[46,1,2]]]);
//# sourceMappingURL=main.5178f7e7.chunk.js.map